<!DOCTYPE html>
<html lang='zh-CN'>

<head>
  <meta name="generator" content="Hexo 7.0.0">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://gcore.jsdelivr.net'>
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin>
  <link rel='dns-prefetch' href='//unpkg.com'>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>MySQL-基础(2) - 小破站</title>

  
    <meta name="description" content="MySQL数据库基础部分的学习笔记，函数、约束、多表查询以及事务的认识。">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL-基础(2)">
<meta property="og:url" content="https://strivingto.top/2023/05/25/MySQL-%E5%9F%BA%E7%A1%80(2)/index.html">
<meta property="og:site_name" content="小破站">
<meta property="og:description" content="MySQL数据库基础部分的学习笔记，函数、约束、多表查询以及事务的认识。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.ibb.co/LpYcLcQ/2023-03-24-184436.png">
<meta property="og:image" content="https://i.ibb.co/ngmK11V/2023-03-24-185714.png">
<meta property="og:image" content="https://i.ibb.co/9vt0266/2023-03-24-185046.png">
<meta property="og:image" content="https://i.ibb.co/Bzy5cSP/2023-03-24-185735.png">
<meta property="og:image" content="https://i.ibb.co/NjDWZzr/2023-03-11-194015.png">
<meta property="og:image" content="https://i.ibb.co/C9tbmkF/2023-03-11-195921.png">
<meta property="og:image" content="https://i.ibb.co/GMG8c0v/2023-03-11-200403.png">
<meta property="og:image" content="https://i.ibb.co/vQ2KR8q/2023-03-16-205549.png">
<meta property="og:image" content="https://i.ibb.co/7ySXNBT/2023-03-24-202555.png">
<meta property="og:image" content="https://i.ibb.co/tssjQf0/34fd95744bab456baaf2cacc1dbca569.png">
<meta property="og:image" content="https://i.ibb.co/KWVqr1G/2023-03-24-203158.png">
<meta property="og:image" content="https://i.ibb.co/rvvhm2h/2023-03-24-205020.png">
<meta property="og:image" content="https://i.ibb.co/JRX8GKS/2023-03-24-210229.png">
<meta property="og:image" content="https://i.ibb.co/cNpPXB4/2023-03-24-210315.png">
<meta property="og:image" content="https://i.ibb.co/z7rTyt7/2023-03-24-210415.png">
<meta property="og:image" content="https://i.ibb.co/W0BPvRS/2023-03-24-211015.png">
<meta property="og:image" content="https://i.ibb.co/LY1fb73/2023-03-24-211339.png">
<meta property="og:image" content="https://i.ibb.co/GkWqVnt/2023-03-24-211600.png">
<meta property="og:image" content="https://i.ibb.co/wLYTXbq/2023-03-18-111011.png">
<meta property="article:published_time" content="2023-05-25T13:07:38.000Z">
<meta property="article:modified_time" content="2023-12-28T02:40:56.475Z">
<meta property="article:author" content="Echo">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://i.ibb.co/LpYcLcQ/2023-03-24-184436.png">
  
  
  
  <meta name="keywords" content="MySQL">

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="https://i.ibb.co/t8bH857/avatar.png">
  

  

  


  
    
      <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC&display=swap" rel="stylesheet">
    
  
</head>

<body>
  

<div class="l_cover post"><div class="cover"><div class="lazy img bg" data-bg="https://source.unsplash.com/2000x400/?nature,beautiful"></div></div></div>


  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    

  

<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://i.ibb.co/t8bH857/avatar.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">Echo</div><div class="sub normal cap">种一棵树最好的时间是十年前</div><div class="sub hover cap" style="opacity:0"> 其次是现在</div></a></div>

<nav class="menu dis-select"><a class="nav-item" href="/more/">更多</a><a class="nav-item" href="/friends/">友链</a><a class="nav-item" href="/about/">关于</a></nav>
</header>


<div class="widgets">
<widget class="widget-wrapper search"><div class="widget-body"><div class="search-wrapper" id="search"><form class="search-form"><input type="text" class="search-input" id="search-input" data-filter="/blog/" placeholder="文章搜索"><svg t="1670596976048" class="icon search-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2676" width="200" height="200"><path d="M938.2 832.6L723.8 618.1c-2.5-2.5-5.3-4.4-7.9-6.4 36.2-55.6 57.3-121.8 57.3-193.1C773.3 222.8 614.6 64 418.7 64S64 222.8 64 418.6c0 195.9 158.8 354.6 354.6 354.6 71.3 0 137.5-21.2 193.2-57.4 2 2.7 3.9 5.4 6.3 7.8L832.5 938c14.6 14.6 33.7 21.9 52.8 21.9 19.1 0 38.2-7.3 52.8-21.8 29.2-29.1 29.2-76.4 0.1-105.5M418.7 661.3C284.9 661.3 176 552.4 176 418.6 176 284.9 284.9 176 418.7 176c133.8 0 242.6 108.9 242.6 242.7 0 133.7-108.9 242.6-242.6 242.6" p-id="2677"></path></svg></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div></div></widget>


<widget class="widget-wrapper toc single" id="data-toc"><div class="widget-header cap dis-select"><span class="name">MySQL-基础(2)</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-text">字符串函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-text">数值函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-text">日期函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-text">流程控制函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F"><span class="toc-text">约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5-2"><span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">约束的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%BC%94%E7%A4%BA"><span class="toc-text">代码演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-text">语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-%E6%9B%B4%E6%96%B0%E8%A1%8C%E4%B8%BA"><span class="toc-text">删除&#x2F;更新行为</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA"><span class="toc-text">实例演示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%86%E5%90%91%E8%A1%A8%E5%88%B0%E6%A8%A1%E5%9E%8B%E6%BC%94%E7%A4%BA"><span class="toc-text">逆向表到模型演示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%86%E5%90%91%E8%A1%A8%E5%88%B0%E6%A8%A1%E5%9E%8B%E6%BC%94%E7%A4%BA-2"><span class="toc-text">逆向表到模型演示</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-text">多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-text">内连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-text">外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-text">自连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA-2"><span class="toc-text">实例演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E5%85%B3%E7%B3%BB%E5%9B%BE"><span class="toc-text">连接关系图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2-UNION"><span class="toc-text">联合查询(UNION)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA-3"><span class="toc-text">实例演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E8%AF%AD%E6%B3%95"><span class="toc-text">查询语法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E9%87%8F%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">标量子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA-4"><span class="toc-text">实例演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">列子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA-5"><span class="toc-text">实例演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">行子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA-6"><span class="toc-text">实例演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">表子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA-7"><span class="toc-text">实例演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%80%BB%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA"><span class="toc-text">查询总实例演示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%80%83%E6%A0%B8%E9%94%99%E9%A2%98"><span class="toc-text">考核错题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-2"><span class="toc-text">语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%BC%94%E7%A4%BA-2"><span class="toc-text">代码演示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%9B%9B%E5%A4%A7%E7%89%B9%E5%BE%81-ACID"><span class="toc-text">事务四大特征(ACID)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98%EF%BC%88%E8%84%8F%E8%AF%BB%E3%80%81%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E3%80%81%E5%B9%BB%E8%AF%BB"><span class="toc-text">并发事务问题（脏读、不可重复读、幻读)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E4%B8%AA%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-text">事务的四个隔离级别</span></a></li></ol></li></ol></div></div></widget>




</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://github.com/GIMME-JIA" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/t8bH857/avatar.png"/></a><a class="social" href="https://" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/assets/placeholder/social/3845874.svg"/></a><a class="social" href="https://" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/assets/placeholder/social/3616429.svg"/></a><a class="social" href="https://" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/assets/placeholder/social/942ebbf1a4b91.svg"/></a></div></footer>

    </aside>
    <div class='l_main'>
      

      



<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a><span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></div><div id="post-meta">发布于&nbsp;<time datetime="2023-05-25T13:07:38.000Z">2023-05-25</time></div></div>

<article class='md-text content post'>
<h1 class="article-title"><span>MySQL-基础(2)</span></h1>
<h2 id="函数">函数</h2>
<h3 id="概念">概念</h3>
<p>函数一般是指一段可以直接被另一段程序调用的程序或代码</p>
<h3 id="字符串函数">字符串函数</h3>
<p>MySQL常用函数如下：</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>CONCAT(S1,S2,…Sn)</td>
<td>字符串拼接，将S1,S2,…Sn拼成一个字符串</td>
</tr>
<tr>
<td>LOWER(str)</td>
<td>将字符串str全部转为小写</td>
</tr>
<tr>
<td>UPPER(str)</td>
<td>将字符串str全部转为大写</td>
</tr>
<tr>
<td>LPAD(str，n，pad)</td>
<td>左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</td>
</tr>
<tr>
<td>RPAD(str，n，pad)</td>
<td>右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</td>
</tr>
<tr>
<td>TRIM(str)</td>
<td>去掉字符串头部和尾部的空格</td>
</tr>
<tr>
<td>SUBSTRING(str，strart，len)</td>
<td>返回从字符串str从start位置起的len个长度的字符串</td>
</tr>
</tbody>
</table>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONCAT(&#x27;hello&#x27;,&#x27;masql&#x27;,&#x27;!&#x27;);    # hellomasql!</span><br><span class="line"></span><br><span class="line">SELECT UPPER(&#x27;hleeo&#x27;);    # HLEEO</span><br><span class="line"></span><br><span class="line">SELECT LOWER(&#x27;HELLO&#x27;);		# hello</span><br><span class="line"></span><br><span class="line">SELECT LPAD(&#x27;HELLO&#x27;,9,&#x27;--&#x27;);   # ----HELLO</span><br><span class="line">SELECT RPAD(&#x27;HELLO&#x27;,9,&#x27;--&#x27;);	 # HELLO----</span><br><span class="line"></span><br><span class="line">SELECT TRIM(&#x27;  hello  world &#x27;);  # hello  world</span><br><span class="line"></span><br><span class="line">SELECT SUBSTRING(&#x27;  hello  world &#x27;,1,10);</span><br></pre></td></tr></table></figure></div></div>
<h3 id="数值函数">数值函数</h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>CEIL(x)</td>
<td>向上取整</td>
</tr>
<tr>
<td>FLOOR(X)</td>
<td>向下取整</td>
</tr>
<tr>
<td>MOD(x,y)</td>
<td>返回x/y的模</td>
</tr>
<tr>
<td>RAND()</td>
<td>返回0~1内的随机数</td>
</tr>
<tr>
<td>ROUND(x,y)</td>
<td>求参数x的四舍五入的值，保留y位小数</td>
</tr>
</tbody>
</table>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 数值函数</span><br><span class="line">SELECT RAND();  </span><br><span class="line"></span><br><span class="line">SELECT MOD(5,2);  # 1</span><br><span class="line"></span><br><span class="line">SELECT ROUND(3.1415926,5);  # 3.14159</span><br><span class="line"></span><br><span class="line">SELECT CEIL(1.000001);	# 2</span><br><span class="line"></span><br><span class="line">SELECT FLOOR(1.9999999);   # 1</span><br><span class="line"></span><br><span class="line">-- 通过函数，生成一个六位数的随机验证码</span><br><span class="line">-- 先生成一个随机数乘以1000000</span><br><span class="line">-- 再对其进行四舍五入保留0位小数</span><br><span class="line">-- 最后将其进行填充，以达到六位数</span><br><span class="line">SELECT LPAD(ROUND(RAND() * 1000000,0),6,&#x27;0&#x27;);</span><br></pre></td></tr></table></figure></div></div>
<h3 id="日期函数">日期函数</h3>
<p>常见日期函数如下</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>CURDATE()</td>
<td>返回当前日期</td>
</tr>
<tr>
<td>CURTIME()</td>
<td>返回当前时间</td>
</tr>
<tr>
<td>NOW()</td>
<td>返回当前日期和时间</td>
</tr>
<tr>
<td>YEAR(date)</td>
<td>获取指定date的年份</td>
</tr>
<tr>
<td>MONTH(date)</td>
<td>获取指定date的月份</td>
</tr>
<tr>
<td>DAY(date)</td>
<td>获取指定date的日期</td>
</tr>
<tr>
<td>DATE_ADD(date，INTERVAL expr type)</td>
<td>返回一个日期/时间值加上一个时间间隔expr后的时间值</td>
</tr>
<tr>
<td>DATEDIFF(date1，date2)</td>
<td>返回起始时间data1和结束时间date2之间的天数</td>
</tr>
</tbody>
</table>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-- 时间函数</span><br><span class="line">SELECT CURDATE();    -- 2023-03-23</span><br><span class="line"></span><br><span class="line">SELECT CURTIME();		-- 21:34:42</span><br><span class="line"></span><br><span class="line">SELECT NOW();    -- 2023-03-23 21:34:17</span><br><span class="line"></span><br><span class="line">SELECT YEAR(NOW());  -- 2023</span><br><span class="line"></span><br><span class="line">SELECT MONTH(NOW());  -- 3</span><br><span class="line"></span><br><span class="line">SELECT DAY(NOW());  -- 23</span><br><span class="line"></span><br><span class="line">SELECT DATE_ADD(NOW(),INTERVAL 70 YEAR);    -- 2093-03-23 21:37:21</span><br><span class="line"></span><br><span class="line">-- 前面的时间减去后面的时间</span><br><span class="line">SELECT DATEDIFF(CURDATE(),&#x27;2003-12-27&#x27;);  -- 7026</span><br><span class="line">SELECT DATEDIFF(&#x27;2003-12-27&#x27;,CURDATE()); -- -7026</span><br></pre></td></tr></table></figure></div></div>
<h3 id="流程控制函数">流程控制函数</h3>
<p>流程函数也是常用的一类函数，可以在SQL语句中实现条件筛选，从而提高语句效率</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>IF(value，t，f)</td>
<td>如果value为true，则返回t，否则返回f</td>
</tr>
<tr>
<td>IFNULL(value1，value2)</td>
<td>如果value1不为空，返回value1，否则返回value2</td>
</tr>
<tr>
<td>CASE WHEN [val1] THEN [res1] …ELSE [default] END</td>
<td>如果val1为true，返回rest1，…否则返回fedault默认值</td>
</tr>
<tr>
<td>CASE [expr] WHEN [val1] THEN [res1] …ELSE [default] END</td>
<td>如果expr的值等于val1，返回res1，…否则返回default默认值</td>
</tr>
</tbody>
</table>
<p>字段演示</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/LpYcLcQ/2023-03-24-184436.png"/></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/ngmK11V/2023-03-24-185714.png"/></div></div>
<p>表达式演示</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/9vt0266/2023-03-24-185046.png"/></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/Bzy5cSP/2023-03-24-185735.png"/></div></div>
<h2 id="约束">约束</h2>
<h3 id="概念-2">概念</h3>
<ul>
<li>约束是作用于表中列上得规则，用于限制加入表的数据；</li>
<li>约束的存在保证了数据库中数据的正确性、有效性和完整性。</li>
</ul>
<h3 id="约束的分类">约束的分类</h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
<th>关键字</th>
</tr>
</thead>
<tbody>
<tr>
<td>非空约束</td>
<td>保证所有数据不为null</td>
<td>NUT NULL</td>
</tr>
<tr>
<td>唯一约束</td>
<td>保证列中所有数据各不相同</td>
<td>UNIQUE</td>
</tr>
<tr>
<td>主键约束</td>
<td>主键是一行数据的唯一标识，要求<strong>非空且唯一</strong></td>
<td>PRIMARY KEY</td>
</tr>
<tr>
<td>检查约束</td>
<td>保证列中所有的值满足某一条件</td>
<td>CHECK</td>
</tr>
<tr>
<td>默认约束</td>
<td>保存数据时，未指定值则采用默认值</td>
<td>DEFAULT</td>
</tr>
<tr>
<td>外键约束</td>
<td>外键用来让两个表的数据之间建立连接，保证数据的一致性和完整性</td>
<td>FOREIGN KEY</td>
</tr>
</tbody>
</table>
<p><strong>额外的，主键自动增长：AUTO_INCREMENT（使用条件：当前列是数字类型并且唯一约束）</strong></p>
<h4 id="代码演示">代码演示</h4>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> person(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,   <span class="comment">-- id，主键且自增长</span></span><br><span class="line">name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span>, <span class="comment">-- 姓名，非空且唯一</span></span><br><span class="line">age <span class="type">INT</span> <span class="keyword">CHECK</span>(age <span class="operator">&lt;</span><span class="number">100</span> <span class="keyword">AND</span> age <span class="operator">&gt;</span> <span class="number">0</span>), <span class="comment">-- 年龄，大于0小于100</span></span><br><span class="line">sex <span class="type">VARCHAR</span>(<span class="number">5</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> ,  <span class="comment">-- 性别，不为空</span></span><br><span class="line">address <span class="type">VARCHAR</span>(<span class="number">5</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>, <span class="comment">-- 住址，不为空</span></span><br><span class="line">score <span class="keyword">DOUBLE</span>(<span class="number">5</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="comment">-- 成绩默认为0,不为空</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></div></div>
<h3 id="外键约束">外键约束</h3>
<h4 id="语法">语法</h4>
<p>外键的创建，需要满足以下四个条件，否则会被MySQL数据库拒绝：<br />
1、创建外键的表和列存在<br />
2、组成外键的列存在索引<br />
3、外键字段和关联字段，数据类型必须一致</p>
<h4 id="删除-更新行为">删除/更新行为</h4>
<table>
<thead>
<tr>
<th>行为</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>NO ACTION （默认行为）</td>
<td>当在父表中删除/更新对应记录时，首先应该检查是否有对应外键，如果有则不允许删除/更新。(与RESTRICT一致)</td>
</tr>
<tr>
<td>RESTRICT（默认行为）</td>
<td>当在父表中删除/更新对应记录时，首先应该检查是否有对应外键，如果有则不允许删除/更新。(与NO ACTION一致)</td>
</tr>
<tr>
<td>CASCADE</td>
<td>当在父表中删除/更新对应记录时，首先应该检查是否有对应外键，如果有，则也删除/更新外键在子表中的记录。</td>
</tr>
<tr>
<td>SET NULL</td>
<td>当在父表中删除对应记录时，首先应该检查是否有对应外键，如果有则设置子表中该外键值为null(这就要求该外键允许null)。</td>
</tr>
<tr>
<td>SET DEFAULT</td>
<td>父表有变更时，子表将外键列设置成一个默认的值(Innodb不支持)。</td>
</tr>
</tbody>
</table>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- CASCADE</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键名 <span class="keyword">FOREIGN</span> KEY 从表字段名 REFERANCE 主表(字段名) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> 行为 <span class="keyword">ON</span> <span class="keyword">DELETE</span> 行为;</span><br></pre></td></tr></table></figure></div></div>
<ol>
<li>添加约束</li>
</ol>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表时添加外键约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">	列名 数据类型,</span><br><span class="line">  ……</span><br><span class="line">  [<span class="keyword">CONSTRAINT</span>] [外键名称] <span class="keyword">FOREIGN</span> KEY(外键列名) <span class="keyword">REFERENCES</span> 主表(主表列名)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 建完表后添加外键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键名称 <span class="keyword">FOREIGN</span> KEY (外键字段名称) <span class="keyword">REFERENCES</span> 主表(主表列名);</span><br></pre></td></tr></table></figure></div></div>
<ol start="2">
<li>删除约束</li>
</ol>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY 外键名称;</span><br></pre></td></tr></table></figure></div></div>
<h4 id="实例演示">实例演示</h4>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/NjDWZzr/2023-03-11-194015.png"/></div></div>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 部门表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept(</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	dep_name <span class="type">varchar</span>(<span class="number">10</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp(</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	name <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">	age <span class="type">int</span>,</span><br><span class="line">	dep_id <span class="type">int</span>,</span><br><span class="line">	</span><br><span class="line">	<span class="comment">-- 添加外键 dep-id,关联dept表的id主键</span></span><br><span class="line">	<span class="keyword">CONSTRAINT</span> fk_emp_dept <span class="keyword">FOREIGN</span> KEY(dep_id) <span class="keyword">REFERENCES</span> dept(id)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 注：当需要添加外键时，应该先有主表再有从表，信息的添加也是。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建完表后添加外键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_emp_dept <span class="keyword">FOREIGN</span> KEY(dep_id) <span class="keyword">REFERENCES</span> dept(id);</span><br></pre></td></tr></table></figure></div></div>
<h4 id="逆向表到模型演示">逆向表到模型演示</h4>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/C9tbmkF/2023-03-11-195921.png"/></div></div>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除外键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY fk_emp_dept;</span><br></pre></td></tr></table></figure></div></div>
<h4 id="逆向表到模型演示-2">逆向表到模型演示</h4>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/GMG8c0v/2023-03-11-200403.png"/></div></div>
<h2 id="多表查询">多表查询</h2>
<h3 id="简介">简介</h3>
<ul>
<li>笛卡尔积：取A,B组合所有情况</li>
<li>多表查询：从多张表查询数据
<ul>
<li>多表关系介绍
<ul>
<li>一对一<br />
- 如 用户 与 用户详情 的关系<br />
- 一对一对用于单表拆分，将一张表的基础字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率<br />
- 在任意一方面加入外键，关联另外一方的主键，并且设置外键为唯一的(UNIQUE</li>
<li>一对多<br />
- 如 部门 与 员工 的关系<br />
- 个部门对应多个员工，一个员工对应一个部门<br />
- 在多的一方建立外键，指向一的一方的主键</li>
<li>多对多<br />
- 如 学生 与 课程 的关系<br />
- 一个学生可以选修多门课程，一门课程也可以供多个学生选择<br />
- 建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</li>
</ul>
</li>
<li>连接查询
<ul>
<li>内连接：<strong>合并具有同一列的两个以上的表的行, 结果集中不包含一个表与另一个表不匹配的行</strong></li>
<li>外连接：查询<strong>所有</strong>的数据时，就一定会用到外连接。
<ul>
<li>左外连接：相当于查询A（左）表所有数据和交集部分数据</li>
<li>右外连接：相当于查询B（右）表所有数据和交集部分数据</li>
<li>满外连接：<strong>满外连接的结果 = 左右表匹配的数据 + 左表没有匹配到的数据 + 右表没有匹配到的数据。</strong></li>
</ul>
</li>
<li>自连接：当前表与自身的连接查询，自连接必须使用表别名
<ul>
<li>自连接查询，可以是内连接，也可以是外连接</li>
</ul>
</li>
<li>联合查询-UNION , UNION ALL
<ul>
<li>把多次查询的结果合并起来，形成一个新的查询结果集</li>
</ul>
</li>
<li>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/vQ2KR8q/2023-03-16-205549.png"/></div></div>
</li>
</ul>
</li>
<li>子查询
<ul>
<li>概念：查询中嵌套查询，称嵌套查询为子查询</li>
<li>子查询根据查询结果不同，作用不同，分为：
<ul>
<li>标量子查询（子查询结果为单个值）</li>
<li>列子查询（子查询结果为一列）</li>
<li>行子查询（子查询结果为一行）</li>
<li>表子查询（子查询结果为多行多列）</li>
</ul>
</li>
<li>子查询的外部语句可以是INSERT/UPDATE/DELETE/SELECT的任何一个</li>
<li>根据子查询位置，分为：WHERE之后，FROM之后，SELECT之后。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="内连接">内连接</h3>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 隐式内连接:没有JOIN关键字，条件使用WHERE指定</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span>，表<span class="number">2</span>，…… <span class="keyword">WHERE</span> 条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显示内连接:使用INNER JOIN ... ON语句, 可以省略INNER</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> [<span class="keyword">INNER</span>] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 表连接条件 <span class="keyword">WHERE</span> 查询条件;</span><br></pre></td></tr></table></figure></div></div>
<h3 id="外连接">外连接</h3>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 左外连接:使用LEFT OUTER JOIN ... ON，OUTER可以省略</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">LEFT</span> [<span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 表连接条件 <span class="keyword">WHERE</span> 查询条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右外连接</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">RIGHT</span> [<span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 表连接条件 <span class="keyword">WHERE</span> 查询条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 其两者本质区别是表名的位置所在，一般情况下使用左外连接</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div></div>
<h3 id="自连接">自连接</h3>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表A 别名A <span class="keyword">JOIN</span> 表A 别名B <span class="keyword">ON</span> 条件…… ;</span><br></pre></td></tr></table></figure></div></div>
<h4 id="实例演示-2">实例演示</h4>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/7ySXNBT/2023-03-24-202555.png"/></div></div>
<h3 id="连接关系图">连接关系图</h3>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/tssjQf0/34fd95744bab456baaf2cacc1dbca569.png"/></div></div>
<h3 id="联合查询-UNION">联合查询(UNION)</h3>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>,... <span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span>]</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span>,... <span class="keyword">FROM</span> table2</span><br></pre></td></tr></table></figure></div></div>
<ul>
<li>UNION  操作符返回两个查询的结果集的并集，<strong>去除重复记录</strong>。</li>
<li>UNION ALL 操作符返回两个查询的结果集的并集。对于两个结果集的重复部分，<strong>不去重</strong>。</li>
</ul>
<p>结论：如果明确知道合并数据后的结果数据不存在重复数据，或者不需要去除重复的数据，则尽量使用UNION ALL语句，以提高数据查询的效率。</p>
<h4 id="实例演示-3">实例演示</h4>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/KWVqr1G/2023-03-24-203158.png"/></div></div>
<h3 id="子查询">子查询</h3>
<h4 id="查询语法">查询语法</h4>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 单行单列：作为条件值，使用= != &gt; &lt; 等进行条件判断</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表 <span class="keyword">WHERE</span> 字段名 <span class="operator">=</span> (子查询);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多行单列：作为条件值，使用IN等关键字进行条件判断</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表 <span class="keyword">WHERE</span> 字段名 <span class="keyword">in</span> (子查询);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多行多列：作为虚拟表</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> (子查询) <span class="keyword">WHERE</span> 条件;</span><br></pre></td></tr></table></figure></div></div>
<h3 id="标量子查询">标量子查询</h3>
<p>子查询的结果返回单个值（数字，字符串，日期等），最简单的形式，称为标量子查询<br />
常用操作符： =  、 &lt;&gt;  、 &gt;  、 &gt;=  、 &lt;  、 &lt;=</p>
<h4 id="实例演示-4">实例演示</h4>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/rvvhm2h/2023-03-24-205020.png"/></div></div>
<h3 id="列子查询">列子查询</h3>
<p>子查询的返回结果是一列（可以是多行），这种子查询称为列子查询。<br />
常用操作符：  IN  、 NOT IN  、 ANY  、 SOME  、 ALL</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>IN</td>
<td>在指定的集合范围内多选一</td>
</tr>
<tr>
<td>NOT IN</td>
<td>不在指定的集合范围内</td>
</tr>
<tr>
<td>ANY</td>
<td>列子查询返回列表中，有任意一个满足即可</td>
</tr>
<tr>
<td>SOME</td>
<td>与ANY等同</td>
</tr>
<tr>
<td>ALL</td>
<td>子查询返回列表的所有值都必须满足</td>
</tr>
</tbody>
</table>
<h4 id="实例演示-5">实例演示</h4>
<ol>
<li>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/JRX8GKS/2023-03-24-210229.png"/></div></div>
</li>
<li>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/cNpPXB4/2023-03-24-210315.png"/></div></div>
</li>
<li>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/z7rTyt7/2023-03-24-210415.png"/></div></div>
</li>
</ol>
<h3 id="行子查询">行子查询</h3>
<p>子查询返回的结果是一行（可以是多行），称为行子查询。<br />
常用操作符：  =  、 &lt;&gt;  、 IN  、 NOT IN</p>
<h4 id="实例演示-6">实例演示</h4>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/W0BPvRS/2023-03-24-211015.png"/></div></div>
<h3 id="表子查询">表子查询</h3>
<p>子查询返回的结果是多行多列，这种子查询称为表子查询。<br />
常用操作符：IN</p>
<h4 id="实例演示-7">实例演示</h4>
<ol>
<li>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/LY1fb73/2023-03-24-211339.png"/></div></div>
</li>
<li>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/GkWqVnt/2023-03-24-211600.png"/></div></div>
</li>
</ol>
<h3 id="查询总实例演示">查询总实例演示</h3>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 部门表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept1(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY, <span class="comment">-- 部门id</span></span><br><span class="line">	dname <span class="type">VARCHAR</span>(<span class="number">50</span>),  <span class="comment">-- 部门名称</span></span><br><span class="line">	loc <span class="type">VARCHAR</span>(<span class="number">50</span>)  <span class="comment">-- 部门所在地</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 职务表，职务名称，职务描述</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> job1(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	jname <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	description <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,  <span class="comment">-- 员工id</span></span><br><span class="line">	ename <span class="type">VARCHAR</span>(<span class="number">50</span>), <span class="comment">-- 员工姓名</span></span><br><span class="line">	job_id <span class="type">INT</span>, <span class="comment">-- 职务id</span></span><br><span class="line">	mgr <span class="type">INT</span>, <span class="comment">-- 上级领导</span></span><br><span class="line">	joindata <span class="type">DATE</span>,  <span class="comment">-- 入职日期</span></span><br><span class="line">	salary <span class="type">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>), <span class="comment">-- 工资</span></span><br><span class="line">	bonus <span class="type">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>), <span class="comment">-- 奖金</span></span><br><span class="line">	dept_id <span class="type">INT</span>, <span class="comment">-- 所在部门编号</span></span><br><span class="line">	<span class="keyword">CONSTRAINT</span> emp_jobid_ref_job_id_fk <span class="keyword">FOREIGN</span> KEY (job_id) <span class="keyword">REFERENCES</span> job1(id),</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> emp_deptid_ref_dept_id_fk <span class="keyword">FOREIGN</span> KEY (dept_id) <span class="keyword">REFERENCES</span> dept1(id)</span><br><span class="line">	);</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 工资等级表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> salaryGrade(</span><br><span class="line">  grade <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,  <span class="comment">-- 级别</span></span><br><span class="line">	lowSalary <span class="type">INT</span>,  <span class="comment">-- 最低工资</span></span><br><span class="line">	heiSalary <span class="type">INT</span>  <span class="comment">-- 最高工资</span></span><br><span class="line">	);</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 添加四个部门</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept1(id,dname,loc) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">10</span>,<span class="string">&#x27;教研部&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>),</span><br><span class="line">(<span class="number">20</span>,<span class="string">&#x27;学工部&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>),</span><br><span class="line">(<span class="number">30</span>,<span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;广州&#x27;</span>),</span><br><span class="line">(<span class="number">40</span>,<span class="string">&#x27;财务部&#x27;</span>,<span class="string">&#x27;深圳&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加四个职务</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> job1 (id,jname,description) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;董事长&#x27;</span>,<span class="string">&#x27;管理公司，接单&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;经理&#x27;</span>,<span class="string">&#x27;管理部门员工&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;销售&#x27;</span>,<span class="string">&#x27;向客人推销产品&#x27;</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="string">&#x27;文员&#x27;</span>,<span class="string">&#x27;使用办公软件&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加四个员工</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id,ename,job_id,mgr,joindata,salary,bonus,dept_id)<span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1001</span>,<span class="string">&#x27;孙悟空&#x27;</span>,<span class="number">4</span>,<span class="number">1004</span>,<span class="string">&#x27;2000-12-17&#x27;</span>,<span class="string">&#x27;8000.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1002</span>,<span class="string">&#x27;猪八戒&#x27;</span>,<span class="number">3</span>,<span class="number">1006</span>,<span class="string">&#x27;2001-1-5&#x27;</span>,<span class="string">&#x27;3000.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">10</span>),</span><br><span class="line">(<span class="number">1003</span>,<span class="string">&#x27;沙和尚&#x27;</span>,<span class="number">2</span>,<span class="number">1007</span>,<span class="string">&#x27;2003-12-27&#x27;</span>,<span class="string">&#x27;9000.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1004</span>,<span class="string">&#x27;唐僧&#x27;</span>,<span class="number">1</span>,<span class="number">1009</span>,<span class="string">&#x27;2015-8-7&#x27;</span>,<span class="string">&#x27;6000.00&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加五个工资等级</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salaryGrade(grade,lowSalary,heiSalary)<span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="number">3000</span>,<span class="number">12000</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="number">12000</span>,<span class="number">16000</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="number">16000</span>,<span class="number">20000</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1、查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">分析：</span></span><br><span class="line"><span class="comment">	1、员工编号，员工姓名，工资，信息在emp员工表中</span></span><br><span class="line"><span class="comment">	2、职务名称，职务描述，信息在job职务表中，</span></span><br><span class="line"><span class="comment">	3、job 和 emp 是 一对多的关系 emp.job_id = job.id</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 隐式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span> emp.id,ename,salary,jname,description <span class="keyword">FROM</span> emp,job1 <span class="keyword">WHERE</span> emp.job_id <span class="operator">=</span> job1.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span> emp.id,ename,salary,jname,description <span class="keyword">FROM</span> job1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> emp <span class="keyword">ON</span> emp.job_id <span class="operator">=</span> job1.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">分析：</span></span><br><span class="line"><span class="comment">	1、员工编号，员工姓名，工资在emp表中</span></span><br><span class="line"><span class="comment">	2、职务名称，职务描述，在job1表中</span></span><br><span class="line"><span class="comment">	3、部门名称，部门位置，在dept1表中</span></span><br><span class="line"><span class="comment">	4、emp和dept1为一对多，emp和job1也为一对多</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 隐式内链接</span></span><br><span class="line"><span class="keyword">SELECT</span> emp.id,emp.ename,emp.salary,job1.jname,job1.description,dept1.dname,dept1.loc <span class="keyword">FROM</span> emp,dept1,job1 <span class="keyword">WHERE</span> dept1.id <span class="operator">=</span> emp.dept_id <span class="keyword">AND</span> emp.job_id <span class="operator">=</span> job1.id; </span><br><span class="line"><span class="comment">-- 显式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span> emp.id,emp.ename,emp.salary,job1.jname,job1.description,dept1.dname,dept1.loc <span class="keyword">FROM</span> emp <span class="keyword">INNER</span> <span class="keyword">JOIN</span> dept1 <span class="keyword">ON</span> dept1.id <span class="operator">=</span> emp.dept_id</span><br><span class="line">		<span class="keyword">INNER</span> <span class="keyword">JOIN</span> job1 <span class="keyword">ON</span> emp.job_id <span class="operator">=</span> job1.id; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3、查询员工姓名，工资，工资等级</span></span><br><span class="line"><span class="comment">/*分析：</span></span><br><span class="line"><span class="comment">	1、员工姓名在emp中，工资，</span></span><br><span class="line"><span class="comment">	2、工资等级在salarygrade中</span></span><br><span class="line"><span class="comment">	3、emp.salary &gt;= salarygrade.lowSalary AND emp.salary &lt;= salarygrade.heiSalary</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 左外连接</span></span><br><span class="line"><span class="keyword">SELECT</span> emp.ename,emp.salary,salarygrade.grade <span class="keyword">FROM</span> emp <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> salarygrade <span class="keyword">ON</span> emp.salary <span class="operator">&gt;=</span> salarygrade.lowSalary <span class="keyword">AND</span> emp.salary <span class="operator">&lt;=</span> salarygrade.heiSalary;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4、查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">分析：</span></span><br><span class="line"><span class="comment">	1、员工姓名，工资，在emp</span></span><br><span class="line"><span class="comment">	2、职务名称，职务描述，在job1</span></span><br><span class="line"><span class="comment">	3、部门名称，部门位置，在dept1</span></span><br><span class="line"><span class="comment">	4、工资等级，在salarygrade</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 隐式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span> emp.ename,emp.salary,job1.jname,job1.description,dept1.dname,dept1.loc,salarygrade.grade <span class="keyword">FROM</span> emp,salarygrade,dept1,job1 <span class="keyword">WHERE</span> emp.dept_id <span class="operator">=</span> dept1.id <span class="keyword">AND</span> emp.job_id <span class="operator">=</span> job1.id <span class="keyword">AND</span> emp.salary <span class="operator">&gt;=</span> salarygrade.lowSalary <span class="keyword">AND</span> emp.salary <span class="operator">&lt;=</span> salarygrade.heiSalary;</span><br><span class="line"><span class="comment">-- 显式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span> emp.ename,emp.salary,job1.jname,job1.description,dept1.dname,dept1.loc,salarygrade.grade </span><br><span class="line"><span class="keyword">FROM</span> emp </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> job1 <span class="keyword">ON</span> emp.job_id <span class="operator">=</span> job1.id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> dept1 <span class="keyword">ON</span> emp.dept_id <span class="operator">=</span> dept1.id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> salarygrade <span class="keyword">ON</span> emp.salary <span class="keyword">BETWEEN</span> salarygrade.lowSalary <span class="keyword">AND</span> salarygrade.heiSalary;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5、查询出部门编号，部门名称，部门位置，部门人数</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">分析：</span></span><br><span class="line"><span class="comment">	1、部门编号，部门名称，部门位置属于dept</span></span><br><span class="line"><span class="comment">	2、部门人数：在dept1表中，按照dept_id进行分组，然后count（*）统计数量</span></span><br><span class="line"><span class="comment">	3、使用子查询，让部门表和分组后的表进行内连接</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">SELECT</span> dept_id,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> dept_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dept1,(<span class="keyword">SELECT</span> dept_id,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> dept_id) t</span><br><span class="line"><span class="keyword">WHERE</span> dept1.id <span class="operator">=</span> t.dept_id;</span><br></pre></td></tr></table></figure></div></div>
<h3 id="考核错题">考核错题</h3>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 5.查询员工 及其 所属领导的名字 																																	 </span></span><br><span class="line"><span class="keyword">SELECT</span> a.`NAME` <span class="string">&#x27;员工&#x27;</span>,b.`NAME` <span class="string">&#x27;领导&#x27;</span> <span class="keyword">FROM</span> emp a,emp b <span class="keyword">WHERE</span> a.managerid <span class="operator">=</span> b.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6.查询所有员工 emp 及其领导的名字 emp , 如果员工没有领导, 也需要查询出来 	</span></span><br><span class="line"><span class="comment">-- 左外连接											 #2</span></span><br><span class="line"><span class="keyword">SELECT</span> a.`NAME` <span class="string">&#x27;员工&#x27;</span>,b.`NAME` <span class="string">&#x27;领导&#x27;</span> <span class="keyword">FROM</span> emp a <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> emp b <span class="keyword">ON</span> a.managerid <span class="operator">=</span> b.id; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 25.查询所有的部门信息, 并统计部门的员工人数</span></span><br><span class="line"><span class="keyword">select</span> d.id, d.name , ( <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp e <span class="keyword">where</span> e.dept_id <span class="operator">=</span> d.id ) <span class="string">&#x27;人数&#x27;</span><span class="keyword">from</span> dept d;</span><br></pre></td></tr></table></figure></div></div>
<h2 id="事务">事务</h2>
<h3 id="简介-2">简介</h3>
<ul>
<li>数据库的事务(transaction)是一种机制、一个操作序列，包含了一组数据库操作指令。</li>
<li>事务把所有的命令作为一个整体一起向系统提交或撤销操作请求，即这一组数据库命令要么同时成功，要么同时失败。</li>
<li>事务十一个不可分割的工作逻辑单元。</li>
</ul>
<h3 id="语法-2">语法</h3>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 开启事务</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line">或者 <span class="keyword">BEGIN</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 提交事务</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 回滚事务</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure></div></div>
<ul>
<li>MySQL默认事务自动化提交</li>
</ul>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看事务的默认提交方式</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@AUTOCOMMIT</span>；</span><br><span class="line"><span class="comment">-- 1 自动提交  0 手动提交</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改事务提交方式</span></span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@AUTOCOMMIT</span> <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure></div></div>
<h3 id="代码演示-2">代码演示</h3>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建账户表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> account(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">	name <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">	money <span class="keyword">DOUBLE</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> account(name,money) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;张三&#x27;</span>,<span class="number">1000</span>),(<span class="string">&#x27;李四&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">SET</span> money <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"><span class="comment">-- 开始事务</span></span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 转账操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1、李四金额-500</span></span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">SET</span> money <span class="operator">=</span> money <span class="operator">-</span> <span class="number">500</span> <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;李四&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 错误。。。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、张三金额+500</span></span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">SET</span> money <span class="operator">=</span> money <span class="operator">+</span> <span class="number">500</span> <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 提交事务</span></span><br><span class="line"><span class="keyword">COMMIT</span>；</span><br><span class="line"><span class="comment">-- 回滚事务</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure></div></div>
<h3 id="事务四大特征-ACID">事务四大特征(ACID)</h3>
<ul>
<li><strong>原子性（Atomicity）</strong></li>
</ul>
<p>原子性是指事务是一个不可分割的工作单位，整个事务中的所有操作要么全部提交成功，要么全部失败回滚，对于一个事务来说，不可能只执行其中的一部分操作。</p>
<ul>
<li><strong>一致性（Consistency）</strong></li>
</ul>
<p>一致性是指事务必须使数据库从一个一致性状态变换到另一个一致性状态。   也就是说事务前后数据的完整性必须保持一致。</p>
<ul>
<li><strong>隔离性（Isolation）</strong></li>
</ul>
<p>隔离性是指一个事务的执行不能有其他事务的干扰，事务的内部操作和使用数据对其他的并发事务是隔离的，互不干扰。</p>
<ul>
<li><strong>持久性（Durability）</strong></li>
</ul>
<p>持久性是指一个事务一旦提交，对数据库中数据的改变就是永久性的。此时即使数据库发生故障，修改的数据也不会丢失。接下来其他的操作不会对已经提交了的事务产生影响。</p>
<h3 id="并发事务问题（脏读、不可重复读、幻读">并发事务问题（脏读、不可重复读、幻读)</h3>
<ul>
<li><strong>脏读</strong></li>
</ul>
<p>脏读是指在一个事务处理过程里读取了另一个未提交的事务中的数据。<br />
比如在事务 A 修改数据之后提交数据之前，这时另一个事务 B 来读取数据，如果不加控制，事务 B 读取到 A 修改过数据，之后 A 又对数据做了修改再提交，则 B 读到的数据是脏数据，此过程称为脏读。</p>
<ul>
<li><strong>不可重复读</strong></li>
</ul>
<p>不可重复读是指在数据库访问中，一个事务范围内多次查询却返回了不同的数据值。这是由于在查询间隔中，其他事务修改并提交而引起的。<br />
比如事务 T1 读取某一数据，事务 T2 读取并修改了该数据，T1 为了对读取值进行检验而再次读取该数据，便得到了不同的结果。</p>
<ul>
<li><strong>幻读</strong></li>
</ul>
<p>幻读是指当事务不是独立执行时发生的一种现象，例如第一个事务对一个表中的数据进行了修改，比如这种修改涉及到表中的全部数据行。同时，第二个事务也修改这个表中的数据，这种修改是向表中插入一行新数据。那么，以后就会发生操作第一个事务的用户发现表中还有没有修改的数据行，就好象发生了幻觉一样。<br />
比如事务 A 在按查询条件读取某个范围的记录时，事务 B 又在该范围内插入了新的满足条件的记录，当事务 A 再次按条件查询记录时，会产生新的满足条件的记录。</p>
<h3 id="事务的四个隔离级别">事务的四个隔离级别</h3>
<ul>
<li><strong>未提交读（Read Uncommitted）</strong></li>
</ul>
<p>一个事务能够读取到别的事务中没有提交的更新数据。事务中的修改，即使没有提交，其他事务也可以看得到。在这种隔离级别下有可能发生脏读，不可重复读和幻读。</p>
<ul>
<li><strong>提交读（Read Committed）</strong></li>
</ul>
<p>事务中的修改只有提交以后才能被其它事务看到。在这种隔离级别下解决了脏读，但是有可能发生不可重复读和幻读。</p>
<ul>
<li><strong>可重复读（Repeated Read）(默认)</strong></li>
</ul>
<p>保证了在同一事务中先后执行的多次查询将返回同一结果，看到的每行的记录的结果是一致的，不受其他事务的影响。但是这种级别下有可能发生幻读。</p>
<ul>
<li><strong>可串行化（Serializable）</strong></li>
</ul>
<p>不允许事务并发执行，强制事务串行执行。就是在读取的每一行数据上都加上了锁，读写相互都会阻塞，所以效率很低下。这种隔离级别最高，是最安全的，但是性能最低，不会出现脏读，不可重复读，幻读。</p>
  <div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i.ibb.co/wLYTXbq/2023-03-18-111011.png"/></div></div>
<p>注：隔离级别越高，数据安全性越高，但性能越低。</p>
<div class="tag-plugin note" color="green" child="codeblock"><div class="body"><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看事务隔离级别</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@TRANSACTION_ISOLATION</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置事务隔离级别</span></span><br><span class="line"><span class="keyword">SET</span> [SESSION<span class="operator">|</span><span class="keyword">GLOBAL</span>] TRANSACTION ISOLATION LEVEL &#123;隔离级别&#125;;</span><br></pre></td></tr></table></figure></div></div>


<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/2023/11/08/Redis-%E5%9F%BA%E7%A1%80/">Redis-基础</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/2023/05/22/MySQL-%E5%9F%BA%E7%A1%80(1)/">MySQL-基础(1)</a></div></section></div>


<div class="related-wrap reveal" id="related-posts">
    <section class='header'>
      <div class='title cap theme'>您可能感兴趣的文章</div>
    </section>
    <section class='body'>
    <div class="related-posts"><a class="item" href="\2023\05\22\MySQL-基础(1)\" title="MySQL-基础(1)"><span class="title">MySQL-基础(1)</span><span class="excerpt">MySQL数据库基础部分的学习笔记，SQL的基本认识。</span></a><a class="item" href="\2023\12\24\JVM-字节码文件\" title="JVM-字节码文件"><span class="title">JVM-字节码文件</span><span class="excerpt">学习字节码文件的组成和常见的字节码指令，以及相关的字节码工具。</span></a></div></section></div>





      
<footer class="page-footer reveal fs12"><hr><div class="text"><p>本站由 <a href="/">@anonymity</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题创建。<br />
本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  const stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.19.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"all","path":"/search.json","content":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.css","js":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://gcore.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":true,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
